<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eduardo Mejía | MANAGEMENT</title>
  <meta name="description" content="Manager musical. Escucho demos a las 2am. Detroit, Manchester, CDMX, el Caribe. Si hay pasión, hay proyecto.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
  :root {
    --orange: #ff6600;
    --red: #cc0000;
    --black: #0a0a0a;
    --dark: #111;
    --gray: #1a1a1a;
    --light: #f0ebe3;
    --mono: 'Space Mono', monospace;
    --sans: 'Inter', -apple-system, sans-serif;
  }
  
  * { margin: 0; padding: 0; box-sizing: border-box; }
  ::selection { background: var(--orange); color: var(--black); }
  html { scroll-behavior: smooth; }
  body { background: var(--black); color: var(--light); font-family: var(--sans); line-height: 1.6; overflow-x: hidden; }
  
  /* HERO */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 60px 8vw;
    position: relative;
  }
  
  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(ellipse at 20% 80%, rgba(255,102,0,0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(204,0,0,0.05) 0%, transparent 50%);
    pointer-events: none;
  }
  
  .hero-content { max-width: 800px; position: relative; z-index: 1; }
  .greeting { font-family: var(--mono); font-size: clamp(0.75rem, 1.5vw, 0.9rem); color: var(--orange); letter-spacing: 0.3em; text-transform: uppercase; margin-bottom: 24px; }
  .hero-name { font-size: clamp(2.5rem, 8vw, 5.5rem); font-weight: 800; line-height: 1.05; margin-bottom: 20px; letter-spacing: -0.03em; }
  .hero-name span { display: block; color: var(--orange); }
  .hero-tagline { font-size: clamp(1.1rem, 2.5vw, 1.5rem); font-weight: 300; color: rgba(240,235,227,0.7); max-width: 550px; margin-bottom: 30px; }
  .hero-tagline strong { color: var(--light); font-weight: 600; }
  .hero-philosophy { font-size: clamp(1rem, 2vw, 1.25rem); font-weight: 300; color: rgba(240,235,227,0.5); max-width: 500px; line-height: 1.6; }
  .hero-philosophy em { font-style: normal; color: var(--orange); font-weight: 600; }
  
  .scroll-hint { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 8px; font-family: var(--mono); font-size: 0.7rem; color: rgba(255,102,0,0.6); letter-spacing: 0.2em; animation: float 2s ease-in-out infinite; }
  @keyframes float { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(8px); } }
  
  /* FILOSOFÍA */
  .philosophy { padding: 120px 8vw; background: var(--dark); }
  .section-label { font-family: var(--mono); font-size: 0.7rem; color: var(--orange); letter-spacing: 0.4em; text-transform: uppercase; margin-bottom: 40px; display: flex; align-items: center; gap: 16px; }
  .section-label::after { content: ''; flex: 1; height: 1px; background: linear-gradient(90deg, var(--orange), transparent); max-width: 200px; }
  .philosophy-text { font-size: clamp(1.4rem, 3vw, 2.2rem); font-weight: 300; line-height: 1.5; max-width: 900px; color: rgba(240,235,227,0.85); }
  .philosophy-text em { font-style: normal; color: var(--orange); font-weight: 600; }
  
  /* PLAYER SECTION */
  .player-section { padding: 100px 8vw; background: linear-gradient(180deg, var(--dark) 0%, var(--black) 100%); }
  .player-container { width: 100%; max-width: 1100px; margin: 0 auto; }
  .player-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: stretch; }
  
  /* WAVEFORM PLAYER */
  .waveform-player {
    background: var(--dark);
    border: 1px solid var(--gray);
    border-radius: 12px;
    padding: 24px;
    display: flex;
    flex-direction: column;
    min-height: 380px;
  }
  
  .track-info { text-align: center; margin-bottom: 20px; }
  .track-number { font-family: var(--mono); font-size: 9px; color: var(--orange); letter-spacing: 3px; margin-bottom: 4px; opacity: 0.7; }
  .track-name { font-size: 13px; font-weight: 600; color: rgba(240,235,227,0.9); letter-spacing: 0.5px; }
  
  /* CANVAS WAVEFORM */
  .waveform-wrap { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; }
  #waveCanvas { width: 100%; height: 120px; }
  
  /* CONTROLES */
  .controls { display: flex; justify-content: center; align-items: center; gap: 16px; margin-top: 24px; }
  
  .ctrl-btn {
    width: 48px; height: 48px;
    border: none; border-radius: 50%;
    cursor: pointer; font-size: 14px;
    display: flex; align-items: center; justify-content: center;
    background: linear-gradient(145deg, #1a1a1a, #111);
    color: #555;
    box-shadow: 0 4px 0 #050505, 0 6px 15px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
    transition: all 0.1s;
  }
  
  .ctrl-btn:hover { color: #888; }
  .ctrl-btn:active { transform: translateY(3px); box-shadow: 0 1px 0 #050505, inset 0 1px 0 rgba(255,255,255,0.03); }
  
  .ctrl-btn.play-btn {
    width: 60px; height: 60px; font-size: 18px;
    background: linear-gradient(145deg, #1f1f1f, #141414);
    box-shadow: 0 5px 0 #080808, 0 8px 25px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.08);
    position: relative;
  }
  
  .ctrl-btn.play-btn:hover { color: var(--orange); }
  
  .ctrl-btn.play-btn.active {
    color: var(--orange);
    box-shadow: 0 5px 0 #080808, 0 0 25px rgba(255,102,0,0.25), inset 0 1px 0 rgba(255,255,255,0.08);
  }
  
  .ctrl-btn.play-btn.active::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid rgba(255,102,0,0.3);
    animation: pulse 1.5s ease-out infinite;
  }
  
  @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.4); opacity: 0; } }
  
  .led { position: absolute; top: 6px; right: 6px; width: 5px; height: 5px; border-radius: 50%; background: #222; }
  .ctrl-btn.play-btn.active .led { background: var(--orange); box-shadow: 0 0 6px var(--orange); }
  
  /* SPOTIFY */
  .spotify-container {
    background: var(--dark);
    border: 1px solid var(--gray);
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    min-height: 380px;
  }
  
  .spotify-header {
    padding: 14px 18px;
    border-bottom: 1px solid var(--gray);
    font-family: var(--mono);
    font-size: 9px;
    color: rgba(240,235,227,0.5);
    letter-spacing: 2px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .spotify-header i { color: #1DB954; font-size: 13px; }
  .spotify-embed { flex: 1; }
  .spotify-embed iframe { width: 100%; height: 100%; border: none; min-height: 340px; }
  
  /* SERVICIOS */
  .services { padding: 120px 8vw; background: var(--black); }
  .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 60px; }
  
  .service-card {
    padding: 40px 32px;
    background: var(--gray);
    border-radius: 8px;
    border-left: 4px solid var(--orange);
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  
  .service-card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(255,102,0,0.05) 0%, transparent 50%); opacity: 0; transition: opacity 0.3s; }
  .service-card:hover::before { opacity: 1; }
  .service-card:hover { transform: translateY(-4px); }
  .service-num { font-family: var(--mono); font-size: 0.7rem; color: var(--orange); letter-spacing: 0.2em; margin-bottom: 16px; opacity: 0.7; }
  .service-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 12px; color: var(--light); }
  .service-desc { font-size: 0.95rem; color: rgba(240,235,227,0.6); line-height: 1.6; }
  
  /* VIDEOS - STACK CINEMATOGRÁFICO */
  .videos { padding: 100px 8vw; background: var(--dark); }
  
  .video-stack-container {
    max-width: 900px;
    margin: 60px auto 0;
    position: relative;
    height: 550px;
    perspective: 1200px;
  }
  
  .video-stack {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
  }
  
  .video-card {
    position: absolute;
    width: 100%;
    max-width: 800px;
    left: 50%;
    top: 50%;
    aspect-ratio: 16/9;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 25px 80px rgba(0,0,0,0.8);
    background: #000;
  }
  
  .video-card iframe {
    width: 100%;
    height: 100%;
    border: none;
    pointer-events: none;
  }
  
  .video-card.active iframe {
    pointer-events: auto;
  }
  
  /* Posiciones del stack */
  .video-card:nth-child(1) { z-index: 5; }
  .video-card:nth-child(2) { z-index: 4; }
  .video-card:nth-child(3) { z-index: 3; }
  .video-card:nth-child(4) { z-index: 2; }
  .video-card:nth-child(5) { z-index: 1; }
  
  .video-card.pos-0 {
    transform: translate(-50%, -50%) rotateY(0deg) scale(1);
    opacity: 1;
    z-index: 10;
  }
  
  .video-card.pos-1 {
    transform: translate(-42%, -48%) rotateY(-8deg) scale(0.9);
    opacity: 0.6;
    z-index: 9;
  }
  
  .video-card.pos-2 {
    transform: translate(-34%, -46%) rotateY(-14deg) scale(0.8);
    opacity: 0.35;
    z-index: 8;
  }
  
  .video-card.pos-3 {
    transform: translate(-58%, -48%) rotateY(8deg) scale(0.9);
    opacity: 0.6;
    z-index: 7;
  }
  
  .video-card.pos-4 {
    transform: translate(-66%, -46%) rotateY(14deg) scale(0.8);
    opacity: 0.35;
    z-index: 6;
  }
  
  .video-card:not(.pos-0):hover {
    opacity: 0.8;
    box-shadow: 0 30px 90px rgba(255,102,0,0.2);
  }
  
  /* Overlay para cards no activas */
  .video-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.6);
    transition: opacity 0.4s;
    z-index: 1;
  }
  
  .video-card.pos-0::before {
    opacity: 0;
    pointer-events: none;
  }
  
  /* Número del video */
  .video-card::after {
    content: attr(data-num);
    position: absolute;
    bottom: 16px;
    right: 20px;
    font-family: var(--mono);
    font-size: 12px;
    color: var(--orange);
    letter-spacing: 2px;
    z-index: 2;
    opacity: 0;
    transition: opacity 0.3s;
  }
  
  .video-card:not(.pos-0):hover::after {
    opacity: 1;
  }
  
  /* Controles de navegación */
  .stack-nav {
    position: absolute;
    bottom: -60px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 20px;
  }
  
  .stack-btn {
    width: 44px;
    height: 44px;
    border: 1px solid rgba(255,102,0,0.3);
    background: transparent;
    border-radius: 50%;
    color: var(--orange);
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .stack-btn:hover {
    background: var(--orange);
    color: var(--black);
    border-color: var(--orange);
    box-shadow: 0 0 20px rgba(255,102,0,0.4);
  }
  
  .stack-counter {
    font-family: var(--mono);
    font-size: 11px;
    color: rgba(240,235,227,0.5);
    letter-spacing: 2px;
  }
  
  .stack-counter span {
    color: var(--orange);
  }
  
  @media (max-width: 768px) {
    .video-stack-container { height: 400px; }
    .video-card { max-width: 95%; }
    .video-card.pos-1, .video-card.pos-3 { transform: translate(-50%, -52%) scale(0.88); opacity: 0.4; }
    .video-card.pos-2, .video-card.pos-4 { transform: translate(-50%, -54%) scale(0.76); opacity: 0.2; }
  }
  
  /* CONTACTO */
  .contact { padding: 120px 8vw; background: var(--black); text-align: center; }
  .contact-title { font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 800; margin-bottom: 20px; }
  .contact-title span { color: var(--orange); }
  .contact-links { display: flex; flex-wrap: wrap; justify-content: center; gap: 16px; margin-top: 40px; }
  
  .c-link {
    padding: 16px 32px;
    font-family: var(--mono);
    font-size: 0.85rem;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    border-radius: 4px;
    transition: all 0.2s;
  }
  
  .c-link.primary { background: var(--orange); color: var(--black); }
  .c-link.primary:hover { background: var(--light); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(255,102,0,0.3); }
  .c-link.secondary { background: transparent; color: var(--light); border: 1px solid rgba(240,235,227,0.2); }
  .c-link.secondary:hover { border-color: var(--orange); color: var(--orange); }
  
  /* FOOTER */
  footer { padding: 40px 8vw; border-top: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; }
  .footer-copy { font-family: var(--mono); font-size: 0.7rem; color: rgba(240,235,227,0.4); letter-spacing: 0.1em; }
  .footer-links { display: flex; gap: 24px; }
  .footer-links a { color: rgba(240,235,227,0.4); font-size: 1.1rem; transition: color 0.2s; }
  .footer-links a:hover { color: var(--orange); }
  
  /* WHATSAPP */
  .whatsapp { position: fixed; bottom: 24px; right: 24px; width: 56px; height: 56px; background: #25D366; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 1.5rem; text-decoration: none; box-shadow: 0 4px 20px rgba(37,211,102,0.4); transition: all 0.2s; z-index: 100; }
  .whatsapp:hover { transform: scale(1.1); }
  
  /* RESPONSIVE */
  @media (max-width: 900px) {
    .player-grid { grid-template-columns: 1fr; }
    .video-thumbs { grid-template-columns: repeat(5, 1fr); gap: 8px; }
  }
  
  @media (max-width: 768px) {
    .hero { padding: 40px 6vw; min-height: auto; padding-top: 100px; padding-bottom: 100px; }
    .philosophy, .services, .contact { padding: 80px 6vw; }
    .scroll-hint { display: none; }
    .video-thumbs { grid-template-columns: repeat(3, 1fr); }
  }
  
  @media (max-width: 480px) {
    .hero-name { font-size: 2rem; }
    .contact-links { flex-direction: column; }
    .c-link { width: 100%; text-align: center; }
    .video-thumbs { grid-template-columns: repeat(3, 1fr); }
    .ctrl-btn { width: 42px; height: 42px; }
    .ctrl-btn.play-btn { width: 52px; height: 52px; }
  }
  </style>
</head>
<body>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-content">
      <p class="greeting">ARQUITECTURA MUSICAL</p>
      <h1 class="hero-name">Eduardo<br><span>Mejía</span></h1>
      <p class="hero-tagline">BARCELONA <strong>CIUDAD DE MÉXICO</strong></p>
      <p class="hero-philosophy">Todos los sonidos, todas las voces. <em>LA VERDAD</em> detrás del sonido.</p>
    </div>
    <div class="scroll-hint"><span>SCROLL</span><i class="fas fa-chevron-down"></i></div>
  </section>

  <!-- PLAYER -->
  <section class="player-section">
    <div class="player-container">
      <div class="section-label">Demos & Playlist</div>
      <div class="player-grid">
        
        <!-- WAVEFORM -->
        <div class="waveform-player">
          <div class="track-info">
            <div class="track-number" id="trackNum">TRACK 01 / 05</div>
            <div class="track-name" id="trackName">CARGANDO...</div>
          </div>
          <div class="waveform-wrap">
            <canvas id="waveCanvas"></canvas>
          </div>
          <div class="controls">
            <button class="ctrl-btn" id="prevBtn"><i class="fas fa-backward-step"></i></button>
            <button class="ctrl-btn play-btn" id="playBtn"><span class="led"></span><i class="fas fa-play" id="playIcon"></i></button>
            <button class="ctrl-btn" id="nextBtn"><i class="fas fa-forward-step"></i></button>
          </div>
        </div>
        
        <!-- SPOTIFY -->
        <div class="spotify-container">
          <div class="spotify-header"><i class="fab fa-spotify"></i><span>ESCUCHA TURBOBOYZ</span></div>
          <div class="spotify-embed">
            <iframe src="https://open.spotify.com/embed/playlist/26qaG2E3bW6ZNIk5mvPpjr?utm_source=generator&theme=0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
          </div>
        </div>
        
      </div>
    </div>
  </section>

  <audio id="audio" crossorigin="anonymous" preload="metadata"></audio>

  <!-- SERVICIOS -->
  <section class="services">
    <div class="section-label">Lo que hago</div>
    <div class="services-grid">
      <article class="service-card">
        <div class="service-num">01</div>
        <h3 class="service-title">Representación & Touring</h3>
        <p class="service-desc">Giras nacionales e internacionales. Negocio contratos, armo rutas, conecto con promotores. Del club de 2 personas al festival.</p>
      </article>
      <article class="service-card">
        <div class="service-num">02</div>
        <h3 class="service-title">Distribución & Estrategia</h3>
        <p class="service-desc">Tu música en todas las plataformas con una estrategia real. Data, timing, playlists.</p>
      </article>
      <article class="service-card">
        <div class="service-num">03</div>
        <h3 class="service-title">Editorial & A&R</h3>
        <p class="service-desc">Derechos de autor, licenciamiento, sync para cine y TV.</p>
      </article>
    </div>
  </section>

  <!-- VIDEOS -->
  <section class="videos">
    <div class="section-label">En acción</div>
    <div class="video-stack-container">
      <div class="video-stack" id="videoStack"></div>
      <div class="stack-nav">
        <button class="stack-btn" id="stackPrev"><i class="fas fa-chevron-left"></i></button>
        <div class="stack-counter"><span id="stackCurrent">01</span> / 05</div>
        <button class="stack-btn" id="stackNext"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>
  </section>

  <!-- CONTACTO -->
  <section class="contact">
    <h2 class="contact-title">¿Tienes un <span>proyecto</span>?</h2>
    <div class="contact-links">
      <a href="mailto:emc121091@me.com?subject=Tengo%20un%20proyecto" class="c-link primary">Escríbeme</a>
      <a href="https://edumecar.github.io/Book/" target="_blank" rel="noopener" class="c-link secondary">Ver Planes</a>
      <a href="https://www.linkedin.com/in/edumecar" target="_blank" rel="noopener" class="c-link secondary">LinkedIn</a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <p class="footer-copy">© Eduardo Mejía — CDMX/BARCELONA</p>
    <div class="footer-links">
      <a href="https://www.linkedin.com/in/edumecar" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i></a>
      <a href="https://wa.me/525512478139" target="_blank" rel="noopener"><i class="fab fa-whatsapp"></i></a>
      <a href="mailto:emc121091@me.com"><i class="fas fa-envelope"></i></a>
    </div>
  </footer>

  <a href="https://wa.me/525512478139" class="whatsapp" target="_blank" rel="noopener"><i class="fab fa-whatsapp"></i></a>

  <script>
  // === WAVEFORM CON WEB AUDIO API ===
  const tracks = [
    { name: 'OTRO CABRÓN - VANILLAMILKSHAKE', src: 'micancion.mp3' },
    { name: 'SYNC FLOW', src: 'micancion1.mp3' },
    { name: 'MODULATION', src: 'micancion2.mp3' },
    { name: 'DATASOUL', src: 'micancion3.mp3' },
    { name: 'A&R BEAT', src: 'micancion4.mp3' }
  ];

  let current = 0, playing = false, audioCtx, analyser, dataArray, source, animId;

  const audio = document.getElementById('audio');
  const canvas = document.getElementById('waveCanvas');
  const ctx = canvas.getContext('2d');
  const trackNum = document.getElementById('trackNum');
  const trackName = document.getElementById('trackName');
  const playBtn = document.getElementById('playBtn');
  const playIcon = document.getElementById('playIcon');

  function initAudio() {
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      dataArray = new Uint8Array(analyser.frequencyBinCount);
      source = audioCtx.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(audioCtx.destination);
    }
  }

  function resizeCanvas() {
    canvas.width = canvas.offsetWidth * 2;
    canvas.height = canvas.offsetHeight * 2;
    ctx.scale(2, 2);
  }

  function drawWave() {
    const w = canvas.offsetWidth, h = canvas.offsetHeight;
    ctx.clearRect(0, 0, w, h);
    
    if (!playing) {
      // Estado estático: línea sutil
      ctx.beginPath();
      ctx.moveTo(0, h/2);
      ctx.lineTo(w, h/2);
      ctx.strokeStyle = 'rgba(255,102,0,0.2)';
      ctx.lineWidth = 1;
      ctx.stroke();
      return;
    }
    
    analyser.getByteFrequencyData(dataArray);
    
    const barCount = 60;
    const barWidth = 2;
    const gap = (w - barCount * barWidth) / (barCount + 1);
    
    for (let i = 0; i < barCount; i++) {
      const dataIndex = Math.floor(i * dataArray.length / barCount);
      const value = dataArray[dataIndex] / 255;
      const barHeight = Math.max(2, value * h * 0.8);
      const x = gap + i * (barWidth + gap);
      const y = (h - barHeight) / 2;
      
      const gradient = ctx.createLinearGradient(0, y, 0, y + barHeight);
      gradient.addColorStop(0, `rgba(255,102,0,${0.6 + value * 0.4})`);
      gradient.addColorStop(1, `rgba(204,0,0,${0.4 + value * 0.4})`);
      
      ctx.fillStyle = gradient;
      ctx.fillRect(x, y, barWidth, barHeight);
    }
    
    animId = requestAnimationFrame(drawWave);
  }

  function updateDisplay() {
    trackNum.textContent = `TRACK ${String(current + 1).padStart(2, '0')} / ${String(tracks.length).padStart(2, '0')}`;
    trackName.textContent = tracks[current].name;
    audio.src = tracks[current].src;
  }

  function play() {
    initAudio();
    if (audioCtx.state === 'suspended') audioCtx.resume();
    audio.play().then(() => {
      playing = true;
      playBtn.classList.add('active');
      playIcon.className = 'fas fa-pause';
      drawWave();
    }).catch(e => console.log(e));
  }

  function pause() {
    audio.pause();
    playing = false;
    playBtn.classList.remove('active');
    playIcon.className = 'fas fa-play';
    cancelAnimationFrame(animId);
    drawWave();
  }

  function next() { current = (current + 1) % tracks.length; updateDisplay(); if (playing) play(); }
  function prev() { current = (current - 1 + tracks.length) % tracks.length; updateDisplay(); if (playing) play(); }

  document.getElementById('playBtn').addEventListener('click', () => playing ? pause() : play());
  document.getElementById('prevBtn').addEventListener('click', prev);
  document.getElementById('nextBtn').addEventListener('click', next);
  audio.addEventListener('ended', next);

  window.addEventListener('resize', () => { resizeCanvas(); drawWave(); });
  resizeCanvas();
  updateDisplay();
  drawWave();

  // === VIDEO STACK CINEMATOGRÁFICO ===
  const videos = [
    { id: 'ZGxSXchZNfo' },
    { id: 'oglT_tl7TkU' },
    { id: '2HmVZI4MfkM' },
    { id: 'lJE19BWmbGY' },
    { id: 'DEjjE4Mv2yQ' }
  ];

  const videoStack = document.getElementById('videoStack');
  const stackCurrent = document.getElementById('stackCurrent');
  let activeIndex = 0;

  // Crear video cards
  videos.forEach((v, i) => {
    const card = document.createElement('div');
    card.className = 'video-card';
    card.dataset.index = i;
    card.dataset.num = `0${i + 1}`;
    card.innerHTML = `<iframe src="https://www.youtube.com/embed/${v.id}?rel=0" title="Video ${i+1}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
    card.addEventListener('click', () => {
      if (i !== activeIndex) {
        setActiveVideo(i);
      }
    });
    videoStack.appendChild(card);
  });

  function setActiveVideo(index) {
    activeIndex = index;
    stackCurrent.textContent = String(index + 1).padStart(2, '0');
    
    const cards = document.querySelectorAll('.video-card');
    cards.forEach((card, i) => {
      card.classList.remove('pos-0', 'pos-1', 'pos-2', 'pos-3', 'pos-4', 'active');
      
      const diff = (i - activeIndex + videos.length) % videos.length;
      card.classList.add(`pos-${diff}`);
      
      if (diff === 0) {
        card.classList.add('active');
      }
    });
  }

  document.getElementById('stackPrev').addEventListener('click', () => {
    setActiveVideo((activeIndex - 1 + videos.length) % videos.length);
  });

  document.getElementById('stackNext').addEventListener('click', () => {
    setActiveVideo((activeIndex + 1) % videos.length);
  });

  // Inicializar
  setActiveVideo(0);

  // === SCROLL REVEAL ===
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.service-card, .hero-philosophy, .video-stack-container').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
  });
  </script>
</body>
</html>
