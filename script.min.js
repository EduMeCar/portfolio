const langBtns=document.querySelectorAll(".lang-btn");let currentLang="es";function setLanguage(e){currentLang=e,langBtns.forEach(t=>{t.classList.toggle("active",t.dataset.lang===e),t.setAttribute("aria-pressed",t.dataset.lang===e)}),document.querySelectorAll("[data-es]").forEach(t=>{const a=t.getAttribute(`data-${e}`);a&&(t.innerHTML=a)}),updateAriaLabels(e),document.documentElement.lang=e,localStorage.setItem("preferredLang",e)}function updateAriaLabels(e){const t={es:{booking:"Ver planes de booking",email:"Enviar correo electrónico",linkedin:"Ver perfil de LinkedIn",whatsapp:"Contactar por WhatsApp"},en:{booking:"View booking plans",email:"Send email",linkedin:"View LinkedIn profile",whatsapp:"Contact via WhatsApp"}};document.querySelector('a[href*="Book"]')?.setAttribute("aria-label",t[e].booking),document.querySelector('a[href^="mailto:"]')?.setAttribute("aria-label",t[e].email),document.querySelector('a[href*="linkedin"]')?.setAttribute("aria-label",t[e].linkedin),document.querySelector(".whatsapp")?.setAttribute("aria-label",t[e].whatsapp)}langBtns.forEach(e=>{e.addEventListener("click",()=>setLanguage(e.dataset.lang))});const browserLang=navigator.language.split("-")[0],savedLang=localStorage.getItem("preferredLang");setLanguage(savedLang||("en"===browserLang?"en":"es"));const videos=[{id:"SD3T_Or_mvk",title:"Video 1"},{id:"2HmVZI4MfkM",title:"Video 2"},{id:"XCW95zjBUK4",title:"Video 3"},{id:"DEjjE4Mv2yQ",title:"Video 4"},{id:"lJE19BWmbGY",title:"Video 5"},{id:"dynmB6dCvKw",title:"Video 6"},{id:"oglT_tl7TkU",title:"Video 7"}],videoFrame=document.getElementById("videoFrame"),videoSelector=document.getElementById("videoSelector");videos.forEach((e,t)=>{const a=document.createElement("div");a.className=`video-thumb${0===t?" active":""}`,a.setAttribute("role","button"),a.setAttribute("tabindex","0"),a.setAttribute("aria-label",`Cargar ${e.title}`),a.innerHTML=`<img src="https://img.youtube.com/vi/${e.id}/mqdefault.jpg" alt="${e.title}" loading="lazy">`;const r=()=>{videoFrame.src=`https://www.youtube.com/embed/${e.id}?rel=0&autoplay=1`,document.querySelectorAll(".video-thumb").forEach(e=>e.classList.remove("active")),a.classList.add("active")};a.addEventListener("click",r),a.addEventListener("keypress",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r())}),videoSelector.appendChild(a)});const scrollBtn=document.querySelector(".scroll-top");window.addEventListener("scroll",()=>{window.scrollY>500?scrollBtn.classList.add("visible"):scrollBtn.classList.remove("visible")},{passive:!0});const heroName=document.querySelector(".hero-name");heroName&&heroName.addEventListener("mouseenter",()=>{window.matchMedia("(prefers-reduced-motion: reduce)").matches||(heroName.style.transform="translate(2px, 2px)",setTimeout(()=>heroName.style.transform="translate(0, 0)",100),setTimeout(()=>heroName.style.transform="translate(-1px, 1px)",150),setTimeout(()=>heroName.style.transform="translate(0, 0)",200))});let ticking=!1;function updateShadows(){const e=.01*window.pageYOffset;document.querySelectorAll(".service-card, .stat, .spotify-player, .video-main, .c-link, .hero-subtitle").forEach(t=>{const a=t.getBoundingClientRect();if(a.top<window.innerHeight&&a.bottom>0){const r=Math.max(4,12-.5*e),o=getComputedStyle(t).color;t.style.boxShadow=`${r}px ${r}px 0 ${o}`}}),ticking=!1}window.addEventListener("scroll",()=>{ticking||(requestAnimationFrame(updateShadows),ticking=!0)},{passive:!0}),updateShadows();const spotifyObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.querySelector("iframe");t&&!t.src&&(t.src=t.dataset.src),spotifyObserver.unobserve(e.target)}})},{rootMargin:"50px"}),spotifyContainer=document.querySelector(".spotify-player");if(spotifyContainer){const e=spotifyContainer.querySelector("iframe");e&&(e.dataset.src=e.src,e.src="",spotifyObserver.observe(spotifyContainer))}console.log("✅ Eduardo Mejía Portfolio JS cargado correctamente");
